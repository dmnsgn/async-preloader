<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>async-preloader</title><meta name="description" content="Documentation for async-preloader"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><style>
@media (prefers-color-scheme: dark) {
  :root {
    --md-sys-color-primary: #f6be46;
    --md-sys-color-on-primary: #412d00;
    --md-sys-color-primary-container: #5d4200;
    --md-sys-color-on-primary-container: #ffdea3;
    --md-sys-color-secondary: #d9c4a0;
    --md-sys-color-on-secondary: #3b2f15;
    --md-sys-color-secondary-container: #53452a;
    --md-sys-color-on-secondary-container: #f6e0bb;
    --md-sys-color-tertiary: #b2cfa8;
    --md-sys-color-on-tertiary: #1e361a;
    --md-sys-color-tertiary-container: #344d2f;
    --md-sys-color-on-tertiary-container: #cdebc2;
    --md-sys-color-error: #ffb4ab;
    --md-sys-color-on-error: #690005;
    --md-sys-color-error-container: #93000a;
    --md-sys-color-on-error-container: #ffb4ab;
    --md-sys-color-background: #1e1b16;
    --md-sys-color-on-background: #e9e1d9;
    --md-sys-color-surface: #1e1b16;
    --md-sys-color-on-surface: #e9e1d9;
    --md-sys-color-surface-variant: #4e4639;
    --md-sys-color-on-surface-variant: #d1c5b4;
    --md-sys-color-outline: #9a8f80;
    --md-sys-color-outline-variant: #4e4639;
    --md-sys-color-shadow: #000000;
    --md-sys-color-scrim: #000000;
    --md-sys-color-inverse-surface: #e9e1d9;
    --md-sys-color-inverse-on-surface: #34302a;
    --md-sys-color-inverse-primary: #7a5900;
    --md-sys-color-surface-dim: #16130e;
    --md-sys-color-surface-bright: #3d3933;
    --md-sys-color-surface-container-lowest: #110e09;
    --md-sys-color-surface-container-low: #1e1b16;
    --md-sys-color-surface-container: #221f1a;
    --md-sys-color-surface-container-high: #2d2924;
    --md-sys-color-surface-container-highest: #38342e
  }
}
:root[data-theme="dark"] {
  --md-sys-color-primary: #f6be46;
  --md-sys-color-on-primary: #412d00;
  --md-sys-color-primary-container: #5d4200;
  --md-sys-color-on-primary-container: #ffdea3;
  --md-sys-color-secondary: #d9c4a0;
  --md-sys-color-on-secondary: #3b2f15;
  --md-sys-color-secondary-container: #53452a;
  --md-sys-color-on-secondary-container: #f6e0bb;
  --md-sys-color-tertiary: #b2cfa8;
  --md-sys-color-on-tertiary: #1e361a;
  --md-sys-color-tertiary-container: #344d2f;
  --md-sys-color-on-tertiary-container: #cdebc2;
  --md-sys-color-error: #ffb4ab;
  --md-sys-color-on-error: #690005;
  --md-sys-color-error-container: #93000a;
  --md-sys-color-on-error-container: #ffb4ab;
  --md-sys-color-background: #1e1b16;
  --md-sys-color-on-background: #e9e1d9;
  --md-sys-color-surface: #1e1b16;
  --md-sys-color-on-surface: #e9e1d9;
  --md-sys-color-surface-variant: #4e4639;
  --md-sys-color-on-surface-variant: #d1c5b4;
  --md-sys-color-outline: #9a8f80;
  --md-sys-color-outline-variant: #4e4639;
  --md-sys-color-shadow: #000000;
  --md-sys-color-scrim: #000000;
  --md-sys-color-inverse-surface: #e9e1d9;
  --md-sys-color-inverse-on-surface: #34302a;
  --md-sys-color-inverse-primary: #7a5900;
  --md-sys-color-surface-dim: #16130e;
  --md-sys-color-surface-bright: #3d3933;
  --md-sys-color-surface-container-lowest: #110e09;
  --md-sys-color-surface-container-low: #1e1b16;
  --md-sys-color-surface-container: #221f1a;
  --md-sys-color-surface-container-high: #2d2924;
  --md-sys-color-surface-container-highest: #38342e
}

@media (prefers-color-scheme: light) {
  :root {
    --md-sys-color-primary: #7a5900;
    --md-sys-color-on-primary: #ffffff;
    --md-sys-color-primary-container: #ffdea3;
    --md-sys-color-on-primary-container: #261900;
    --md-sys-color-secondary: #6c5c3f;
    --md-sys-color-on-secondary: #ffffff;
    --md-sys-color-secondary-container: #f6e0bb;
    --md-sys-color-on-secondary-container: #251a04;
    --md-sys-color-tertiary: #4b6545;
    --md-sys-color-on-tertiary: #ffffff;
    --md-sys-color-tertiary-container: #cdebc2;
    --md-sys-color-on-tertiary-container: #092007;
    --md-sys-color-error: #ba1a1a;
    --md-sys-color-on-error: #ffffff;
    --md-sys-color-error-container: #ffdad6;
    --md-sys-color-on-error-container: #410002;
    --md-sys-color-background: #fffbff;
    --md-sys-color-on-background: #1e1b16;
    --md-sys-color-surface: #fffbff;
    --md-sys-color-on-surface: #1e1b16;
    --md-sys-color-surface-variant: #ede1cf;
    --md-sys-color-on-surface-variant: #4e4639;
    --md-sys-color-outline: #7f7667;
    --md-sys-color-outline-variant: #d1c5b4;
    --md-sys-color-shadow: #000000;
    --md-sys-color-scrim: #000000;
    --md-sys-color-inverse-surface: #34302a;
    --md-sys-color-inverse-on-surface: #f8efe7;
    --md-sys-color-inverse-primary: #f6be46;
    --md-sys-color-surface-dim: #e1d9d0;
    --md-sys-color-surface-bright: #fff8f2;
    --md-sys-color-surface-container-lowest: #ffffff;
    --md-sys-color-surface-container-low: #fbf2e9;
    --md-sys-color-surface-container: #f5ede4;
    --md-sys-color-surface-container-high: #efe7de;
    --md-sys-color-surface-container-highest: #e9e1d9
  }
}
:root[data-theme="light"] {
  --md-sys-color-primary: #7a5900;
  --md-sys-color-on-primary: #ffffff;
  --md-sys-color-primary-container: #ffdea3;
  --md-sys-color-on-primary-container: #261900;
  --md-sys-color-secondary: #6c5c3f;
  --md-sys-color-on-secondary: #ffffff;
  --md-sys-color-secondary-container: #f6e0bb;
  --md-sys-color-on-secondary-container: #251a04;
  --md-sys-color-tertiary: #4b6545;
  --md-sys-color-on-tertiary: #ffffff;
  --md-sys-color-tertiary-container: #cdebc2;
  --md-sys-color-on-tertiary-container: #092007;
  --md-sys-color-error: #ba1a1a;
  --md-sys-color-on-error: #ffffff;
  --md-sys-color-error-container: #ffdad6;
  --md-sys-color-on-error-container: #410002;
  --md-sys-color-background: #fffbff;
  --md-sys-color-on-background: #1e1b16;
  --md-sys-color-surface: #fffbff;
  --md-sys-color-on-surface: #1e1b16;
  --md-sys-color-surface-variant: #ede1cf;
  --md-sys-color-on-surface-variant: #4e4639;
  --md-sys-color-outline: #7f7667;
  --md-sys-color-outline-variant: #d1c5b4;
  --md-sys-color-shadow: #000000;
  --md-sys-color-scrim: #000000;
  --md-sys-color-inverse-surface: #34302a;
  --md-sys-color-inverse-on-surface: #f8efe7;
  --md-sys-color-inverse-primary: #f6be46;
  --md-sys-color-surface-dim: #e1d9d0;
  --md-sys-color-surface-bright: #fff8f2;
  --md-sys-color-surface-container-lowest: #ffffff;
  --md-sys-color-surface-container-low: #fbf2e9;
  --md-sys-color-surface-container: #f5ede4;
  --md-sys-color-surface-container-high: #efe7de;
  --md-sys-color-surface-container-highest: #e9e1d9
}
</style><link rel="stylesheet" href="assets/material-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">async-preloader</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>async-preloader</h1></div><div class="tsd-panel tsd-typography"><h1 id="async-preloader" class="tsd-anchor-link">async-preloader<a href="#async-preloader" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.com/package/async-preloader"><img src="https://img.shields.io/npm/v/async-preloader" alt="npm version"></a>
<a href="https://www.npmjs.com/package/async-preloader"><img src="https://img.shields.io/badge/stability-stable-green.svg" alt="stability-stable"></a>
<a href="https://bundlephobia.com/package/async-preloader"><img src="https://img.shields.io/bundlephobia/minzip/async-preloader" alt="npm minzipped size"></a>
<a href="https://github.com/dmnsgn/async-preloader/blob/main/package.json"><img src="https://img.shields.io/librariesio/release/npm/async-preloader" alt="dependencies"></a>
<a href="https://github.com/microsoft/TypeScript"><img src="https://img.shields.io/npm/types/async-preloader" alt="types"></a>
<a href="https://conventionalcommits.org"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-fa6673.svg" alt="Conventional Commits"></a>
<a href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/styled_with-Prettier-f8bc45.svg?logo=prettier" alt="styled with prettier"></a>
<a href="https://github.com/eslint/eslint"><img src="https://img.shields.io/badge/linted_with-ES_Lint-4B32C3.svg?logo=eslint" alt="linted with eslint"></a>
<a href="https://github.com/facebook/jest"><img src="https://img.shields.io/badge/tested_with-jest-99424f.svg" alt="tested with jest"></a>
<a href="https://github.com/dmnsgn/async-preloader/blob/main/LICENSE.md"><img src="https://img.shields.io/github/license/dmnsgn/async-preloader" alt="license"></a></p>
<p>Assets preloader using async/await and fetch for usage both in the browser and Node.js.</p>
<p><a href="https://paypal.me/dmnsgn"><img src="https://img.shields.io/badge/donate-paypal-informational?logo=paypal" alt="paypal"></a>
<a href="https://commerce.coinbase.com/checkout/56cbdf28-e323-48d8-9c98-7019e72c97f3"><img src="https://img.shields.io/badge/donate-coinbase-informational?logo=coinbase" alt="coinbase"></a>
<a href="https://twitter.com/dmnsgn"><img src="https://img.shields.io/twitter/follow/dmnsgn?style=social" alt="twitter"></a></p>
<h2 id="install" class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">--save</span><span class="hl-1"> </span><span class="hl-2">async-preloader</span>
</code><button type="button">Copy</button></pre>

<h2 id="documentation" class="tsd-anchor-link">Documentation<a href="#documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://dmnsgn.github.io/async-preloader/classes/index.AsyncPreloader.html">AsyncPreloader class</a></li>
<li><a href="https://dmnsgn.github.io/async-preloader/modules/types.html">AsyncPreloader types</a></li>
</ul>
<h2 id="quick-start" class="tsd-anchor-link">Quick start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This section covers the basic usage of <code>AsyncPreloader</code>. For more informations about async/await, see <a href="https://developers.google.com/web/fundamentals/primers/async-functions">Async functions - making promises friendly</a>. Usage in Node.js environment is limited to its capacity to handle <code>fetch</code> requests and DOM APIs. Polyfills like <a href="https://www.npmjs.com/package/undici/"><code>undici</code></a>/<a href="https://www.npmjs.com/package/node-fetch"><code>node-fetch</code></a> (for Node.js below 18) and <a href="https://www.npmjs.com/package/xmldom"><code>xmldom</code></a> might come handy .</p>
<h3 id="preload-items-and-retrieve-them" class="tsd-anchor-link">Preload items and retrieve them<a href="#preload-items-and-retrieve-them" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">items</span><span class="hl-1"> = [</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myDefaultFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/default&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myTextFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/text.txt&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myJsonFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/json.json&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myImageFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/image.jpg&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myVideoFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/video.mp4&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myAudioFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/audio.mp3&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myXmlFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/xml.xml&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;mySvgFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/xml.svg&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myHtmlFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/xml.html&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myDefaultXmlFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/xml&quot;</span><span class="hl-1">, </span><span class="hl-5">loader:</span><span class="hl-1"> </span><span class="hl-2">&quot;Xml&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myFont&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">`assets/font.ttf`</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;Space Regular&quot;</span><span class="hl-1">, </span><span class="hl-5">loader:</span><span class="hl-1"> </span><span class="hl-2">&quot;Font&quot;</span><span class="hl-1">, </span><span class="hl-5">fontOptions:</span><span class="hl-1"> { </span><span class="hl-5">timeout:</span><span class="hl-1"> </span><span class="hl-7">10000</span><span class="hl-1"> } },</span><br/><span class="hl-1">  </span><span class="hl-8">// Can be retrieved with the src property eg. AsyncPreloader.items.get(&quot;assets/fileWithoutId&quot;)</span><br/><span class="hl-1">  { </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/fileWithoutId&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-8">// Pass an array of LoadItem</span><br/><span class="hl-8">//</span><br/><span class="hl-8">// Returns a Promise with an array of LoadedValue</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">pItems</span><span class="hl-1"> = </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadItems</span><span class="hl-1">(</span><span class="hl-5">items</span><span class="hl-1">);</span><br/><br/><span class="hl-5">pItems</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-5">items</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">element</span><span class="hl-1"> = </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&quot;myVideoFile&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-5">body</span><span class="hl-1">.</span><span class="hl-0">appendChild</span><span class="hl-1">(</span><span class="hl-5">element</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-5">error</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error loading items&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">));</span>
</code><button type="button">Copy</button></pre>

<hr>
<p>Note: Font loader will try to detect the font in the page using <a href="https://github.com/dmnsgn/fontfaceobserver">FontFaceObserver</a> when no src is specified.</p>
<h3 id="load-items-from-a-manifest-file" class="tsd-anchor-link">Load items from a manifest file<a href="#load-items-from-a-manifest-file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>It works in a similar fashion as createjs's <a href="http://www.createjs.com/docs/preloadjs/classes/LoadQueue.html">PreloadJS</a>.</p>
<pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Pass the file url and an optional path of the property to get in the JSON file.</span><br/><span class="hl-8">// It will load the file using the Json loader and look for the path key expecting an array of `LoadItem`s.</span><br/><span class="hl-8">// Default path is &quot;items&quot; eg the default manifest would look like this:</span><br/><span class="hl-8">// `{ &quot;items&quot;: [ { &quot;src&quot;: &quot;assets/file1&quot; }, { &quot;src&quot;: &quot;assets/file2&quot; }] }`</span><br/><span class="hl-8">//</span><br/><span class="hl-8">// Returns a Promise with an array of LoadedValue</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">pItems</span><span class="hl-1"> = </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadManifest</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;assets/manifest.json&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;data.preloader.items&quot;</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">pItems</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-5">items</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">useLoadedItemsFromManifest</span><span class="hl-1">(</span><span class="hl-5">items</span><span class="hl-1">)) </span><span class="hl-8">// or AsyncPreloader.items.get(&quot;src or id&quot;)</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-5">error</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error loading items&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">));</span>
</code><button type="button">Copy</button></pre>

<h2 id="advanced-usage" class="tsd-anchor-link">Advanced usage<a href="#advanced-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This section takes a closer look at the options of <code>AsyncPreloader</code>.</p>
<h3 id="load-a-single-item-by-using-the-loaders-directly" class="tsd-anchor-link">Load a single item by using the <a href="https://github.com/dmnsgn/async-preloader/blob/main/src/index.ts#L60">loaders</a> directly<a href="#load-a-single-item-by-using-the-loaders-directly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Pass a LoadItem</span><br/><span class="hl-8">//</span><br/><span class="hl-8">// Returns a Promise with the LoadedValue</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">pItem</span><span class="hl-1"> = </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadJson</span><span class="hl-1">({ </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/json.json&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">pItem</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-5">item</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">useLoadedItem</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-5">error</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error loading item&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">));</span>
</code><button type="button">Copy</button></pre>

<hr>
<p>Note: Using the loaders directly won't add the item to the <code>items</code> Map.
Alternatively you could use <code>AsyncPreloader.loadItem</code> and rely on the file extension or add <code>{ loader: &quot;Json&quot;}</code> to the item.</p>
<h3 id="load-a-single-item-by-using-a-string-directly" class="tsd-anchor-link">Load a single item by using a string directly<a href="#load-a-single-item-by-using-a-string-directly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-8">// Pass a string</span><br/><span class="hl-1">  </span><span class="hl-8">//</span><br/><span class="hl-1">  </span><span class="hl-8">// Returns a Promise with the LoadedValue</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">pItem</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadItem</span><span class="hl-1">(</span><span class="hl-2">&quot;assets/json.json&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="get-an-instead-of-the-default" class="tsd-anchor-link">Get an <code>ArrayBuffer</code> instead of the default <code>Blob</code><a href="#get-an-instead-of-the-default" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can specify how the response is handle by using the <code>body</code> key in a <code>LoadItem</code>.</p>
<p>Typical use case: get an ArrayBuffer for the WebAudio API to decode the data with <code>baseAudioContext.decodeAudioData()</code>.</p>
<pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">audioContext</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">AudioContext</span><span class="hl-1">();</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">pItem</span><span class="hl-1"> = </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadAudio</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/audio.mp3&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;arrayBuffer&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">pItem</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-5">item</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">audioContext</span><span class="hl-1">.</span><span class="hl-0">decodeAudioData</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-5">decodedData</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">useDecodedData</span><span class="hl-1">(</span><span class="hl-5">decodedData</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-5">error</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error decoding audio&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">));</span>
</code><button type="button">Copy</button></pre>

<h3 id="getting-the-progress" class="tsd-anchor-link">Getting the progress<a href="#getting-the-progress" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Since <code>fetch</code> doesn't support <code>Progress events</code> yet, you might want to get a per file progress.</p>
<pre><code class="javascript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;async-preloader&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">items</span><span class="hl-1"> = [</span><br/><span class="hl-1">  { </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;myDefaultFile&quot;</span><span class="hl-1">, </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&quot;assets/default&quot;</span><span class="hl-1"> }, </span><span class="hl-8">// ...</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">loadedCount</span><span class="hl-1"> = </span><span class="hl-7">0</span><span class="hl-1">;</span><br/><br/><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">preload</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-9">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-5">item</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadItem</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-5">loadedCount</span><span class="hl-1">++;</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-3">${</span><span class="hl-10">(</span><span class="hl-7">100</span><span class="hl-10"> </span><span class="hl-1">*</span><span class="hl-10"> </span><span class="hl-5">loadedCount</span><span class="hl-10">) </span><span class="hl-1">/</span><span class="hl-10"> </span><span class="hl-5">items</span><span class="hl-10">.</span><span class="hl-5">length</span><span class="hl-3">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">preload</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="abort-one-or-more-loaditems-requests" class="tsd-anchor-link">Abort one or more loadItem(s) request(s)<a href="#abort-one-or-more-loaditems-requests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To abort a loadItem(s) call, you can create an <code>AbortController</code> instance and pass its signal to options.</p>
<pre><code class="javascript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">controller</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">AbortController</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-6">timeoutId</span><span class="hl-1"> = </span><span class="hl-0">setTimeout</span><span class="hl-1">(() </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">controller</span><span class="hl-1">.</span><span class="hl-0">abort</span><span class="hl-1">();</span><br/><span class="hl-1">}, </span><span class="hl-7">150</span><span class="hl-1">);</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">AsyncPreloader</span><span class="hl-1">.</span><span class="hl-0">loadItems</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-5">items</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-5">item</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">      ...</span><span class="hl-5">item</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">options:</span><span class="hl-1"> { ...(</span><span class="hl-5">item</span><span class="hl-1">.</span><span class="hl-5">options</span><span class="hl-1"> || {}), </span><span class="hl-5">signal:</span><span class="hl-1"> </span><span class="hl-5">controller</span><span class="hl-1">.</span><span class="hl-5">signal</span><span class="hl-1"> },</span><br/><span class="hl-1">    }))</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1"> === </span><span class="hl-2">&quot;AbortError&quot;</span><span class="hl-1">) </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Request was aborted&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">finally</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">clearTimeout</span><span class="hl-1">(</span><span class="hl-5">timeoutId</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT © <a href="https://github.com/dmnsgn">Damien Seguin</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#async-preloader"><span>async-<wbr/>preloader</span></a><ul><li><a href="#install"><span>Install</span></a></li><li><a href="#documentation"><span>Documentation</span></a></li><li><a href="#quick-start"><span>Quick start</span></a></li><li><ul><li><a href="#preload-items-and-retrieve-them"><span>Preload items and retrieve them</span></a></li><li><a href="#load-items-from-a-manifest-file"><span>Load items from a manifest file</span></a></li></ul></li><li><a href="#advanced-usage"><span>Advanced usage</span></a></li><li><ul><li><a href="#load-a-single-item-by-using-the-loaders-directly"><span>Load a single item by using the loaders directly</span></a></li><li><a href="#load-a-single-item-by-using-a-string-directly"><span>Load a single item by using a string directly</span></a></li><li><a href="#get-an-instead-of-the-default"><span>Get an  instead of the default </span></a></li><li><a href="#getting-the-progress"><span>Getting the progress</span></a></li><li><a href="#abort-one-or-more-loaditems-requests"><span>Abort one or more load<wbr/>Item(s) request(s)</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">async-preloader</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div><script>
          try {
            const generateLinkElement = document.querySelector(".tsd-generator a");
            const link = document.createElement("a");
            Object.assign(link, {
              href: "https://github.com/dmnsgn/typedoc-material-theme",
              target: "_blank",
              rel: "noreferrer",
              innerText: "typedoc-material-theme."
            });
            generateLinkElement.insertAdjacentElement("afterend", link);
            generateLinkElement.insertAdjacentText("afterend", " with ");
          } catch (error) {

          }
        </script></body></html>
